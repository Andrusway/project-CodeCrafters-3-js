{"version":3,"file":"index.js","sources":["../src/js/hero.js","../src/js/refs.js","../src/js/helpers.js","../src/js/handlers.js","../src/js/books.js","../src/main.js"],"sourcesContent":["import Swiper from 'swiper';\nimport { Navigation, Keyboard } from 'swiper/modules';\n\nexport function initHeroSwiper() {\n  const swiper = new Swiper('.swiper-hero', {\n    modules: [Navigation, Keyboard],\n\n    slidesPerView: 1,\n    loop: false,\n    navigation: {\n      nextEl: '.swiper-button-next',\n      prevEl: '.swiper-button-prev',\n      disabledClass: 'swiper-button-disabled',\n    },\n    keyboard: {\n      enabled: true,\n      onlyInViewport: true,\n    },\n    breakpoints: {\n      0: { spaceBetween: 16 },\n      768: { spaceBetween: 32 },\n      1440: { spaceBetween: 64 },\n    },\n  });\n\n  function updateButtons() {\n    const prevBtn = document.querySelector('.swiper-button-prev');\n    const nextBtn = document.querySelector('.swiper-button-next');\n\n    if (prevBtn) prevBtn.disabled = swiper.isBeginning;\n    if (nextBtn) nextBtn.disabled = swiper.isEnd;\n  }\n\n  swiper.on('init', updateButtons);\n  swiper.on('slideChange', updateButtons);\n\n  return swiper;\n}\n","// перенесла з констанс та відповідно перейменувала\nexport const body = document.body;\nexport const navbarBtn = document.querySelector(\".navbar-btn\");\nexport const navbarCloseBtn = document.querySelector(\".navbar-close-btn\");\nexport const navbarList = document.querySelector(\"ul.navbar\");\nexport const mediaQuery = window.matchMedia(\"(max-width:767px)\")\n\n","import { handleNavigation } from \"./handlers\";\nimport { navbarList, body } from \"./refs\";\n\n\n// ф-я блокування скролу на боді - додає клас стилів\nexport function stopScroll() {\n    body.classList.toggle(\"no-scroll\")\n    \n}\n\n\n// Функції HandleScreenChange та OnNavClick зроблені для того, \n// щоб перехід по секціям в Desktop-і та Tablet-версії відбувався по якорним посиланням, \n// а в мобільній версії відпрацьовула функція HandleNavigation.\n\n// ф-я перевіряє розмір екрану, якщо він відповідає умові(max-width:767px) \n// то ставить слухача події на навбар в іншому разі ні\nexport function handleScreenChange(e){\n\n    if (e.matches) {\n        navbarList.addEventListener(\"click\", onNavClick)\n    } else {\n        navbarList.removeEventListener(\"click\", onNavClick)\n    }\n};\n\n// викликає ф-ю навігації моб версії\nexport function onNavClick(event) {\n    handleNavigation(event);\n};","\nimport { stopScroll } from \"./helpers\";\nimport { navbarBtn,navbarCloseBtn,navbarList, } from \"./refs\";\n\nexport function openNavbar() {\n  if (!navbarList.classList.contains(\"is-visible\")) {\n    navbarList.classList.add(\"is-visible\");\n    navbarBtn.classList.remove(\"is-visible\");\n    navbarCloseBtn.classList.toggle(\"is-visible\");\n    stopScroll()\n    return;\n  }\n}\n\nexport function closeNavbar() {\n  if (navbarList.classList.contains(\"is-visible\")) {\n    navbarList.classList.remove(\"is-visible\");\n    navbarBtn.classList.add(\"is-visible\");\n    navbarCloseBtn.classList.toggle(\"is-visible\");\nstopScroll()\n    return;\n  }\n}\n\n\n// функція пеерходу на сторінку при кліку на лінк навбару \n// та його закриття\nexport function handleNavigation(event) {\n  const link = event.target.closest('a');\n\n  if (!link) return;\n\n  const targetId = link.getAttribute(\"href\").substring(1);\n  const targetSection = document.getElementById(targetId);\n\n  if (targetSection) {\n    targetSection.scrollIntoView({behavior: \"smooth\"})\n  }\n\n  closeNavbar()\n  \n  \n\n}","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://books-backend.p.goit.global/books/';\n\n// ******************************************************** CategoryList ******************************************\n// const\nconst booksCategoriesList = document.querySelector('.books-categories-list');\n\n// function api\nasync function getCategoryList() {\n  const response = await axios.get('category-list');\n  return response.data;\n}\n\n// render-function createMarkupCategoryList\nfunction createMarkupCategoryList(array) {\n  const markup = array\n    .map(({ list_name }) => {\n      if (list_name === '') {\n        return;\n      }\n      return `<li class=\"books-categories-item\">${list_name}</li>`;\n    })\n    .join('');\n\n  booksCategoriesList.innerHTML = markup;\n}\n\n// CategoryList (при завантаженні сторінки)\n\nasync function showCategoryList() {\n  try {\n    const categories = await getCategoryList();\n    categories.unshift({ list_name: 'All categories' });\n    // console.log(categories);\n\n    // render\n    createMarkupCategoryList(categories);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nshowCategoryList();\n\n// *************************************************************** Open/Close Dropdown **********************************************\n\nconst openDropdownBtn = document.querySelector(\n  '.books-categories-title-wrapper'\n);\n\nopenDropdownBtn.addEventListener('click', onOpenDropdownBtn);\n\nfunction onOpenDropdownBtn() {\n  booksCategoriesList.classList.toggle('show-books-categories-list');\n}\n\n// ********************************************** Hide/Display Show More Button **********************************************\n\nconst showMoreButton = document.querySelector('.books-show-more-button');\n\nfunction displayShowMoreButton() {\n  showMoreButton.classList.add('books-show-more-button-display');\n}\n\nfunction hideShowMoreButton() {\n  showMoreButton.classList.remove('books-show-more-button-display');\n}\n\n// ************************************************** TopBooks / Books by Category ************************************************\n// const\nconst booksList = document.querySelector('.books-list');\n\n// ***\n// Кількість книг для відображення (10 або 24)\nconst numberOfBooks = window.innerWidth >= 768 ? 24 : 10;\n\n//і-я про кількість книг на сторінці\nconst booksNumberInfo = document.querySelector('.books-number-info');\nlet booksNumber = 0;\nlet booksTotalNumber = 0;\n\nconst addPerPage = 4;\nconst fromElement = 0;\n\nlet BOOKS = [];\n\n// function api TopBooks\nasync function getTopBooks() {\n  const response = await axios.get('top-books');\n  const responseData = response.data;\n  const allBooksArray = responseData.flatMap(list => list.books);\n  return allBooksArray;\n}\n\n// function api Books by Category\nasync function getBooksByCategory(category) {\n  const response = await axios.get(`category?category=${category}`);\n  return response.data;\n}\n\n// render-function createMarkup TopBooks / ByCategory\nfunction createMarkupBooksList(array) {\n  const markup = array\n    .map(\n      ({ author, book_image, price, title, _id }) =>\n        `<li class=\"books-item\" data-id=\"${_id}\">\n          <img class=\"books-image\" src=\"${book_image}\" alt=\"${title}\" width=\"343\" />\n          <div class=\"book-info\">\n            <div>\n              <p class=\"book-title\">${title}</p>\n              <p class=\"book-author\">${author}</p>\n            </div>\n            <p class=\"book-price\">$${price}</p>\n          </div>\n          <button class=\"books-learn-more-button\" type=\"button\">\n            Learn More\n          </button>\n        </li>`\n    )\n    .join('');\n\n  return markup;\n}\n\n// Books by Category CLICK\nbooksCategoriesList.addEventListener('click', onSelectedCategory);\n\nasync function onSelectedCategory(event) {\n  // close DropDown\n  onOpenDropdownBtn();\n\n  const selectedCategory = event.target.textContent;\n  //   console.log(selectedCategory);\n  if (selectedCategory === 'All categories') {\n    showTopBooks();\n  } else {\n    showBooksByCaregory(selectedCategory);\n  }\n}\n\n// function ShowTopBooks (при завантаженні сторінки і при виборі категорії All Categories)\nasync function showTopBooks() {\n  hideShowMoreButton();\n  try {\n    const allBooks = await getTopBooks();\n    // console.log(allBooks);\n    BOOKS = allBooks;\n\n    // render\n    const firstBooks = BOOKS.slice(fromElement, numberOfBooks);\n    booksList.innerHTML = createMarkupBooksList(firstBooks);\n\n    booksNumber = BOOKS.length > numberOfBooks ? numberOfBooks : BOOKS.length;\n    booksTotalNumber = BOOKS.length;\n    booksNumberInfo.textContent = `Showing ${booksNumber} of ${booksTotalNumber}`;\n\n    if (BOOKS.length > numberOfBooks) {\n      //   console.log(BOOKS.length, numberOfBooks);\n      displayShowMoreButton();\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nshowTopBooks();\n\n// *********** Show Books by Category (при кліку на категорію)\nasync function showBooksByCaregory(category) {\n  hideShowMoreButton();\n  try {\n    const booksByCategory = await getBooksByCategory(category);\n    // console.log(booksByCategory);\n    BOOKS = booksByCategory;\n    booksNumber = BOOKS.length > numberOfBooks ? numberOfBooks : BOOKS.length;\n    booksTotalNumber = BOOKS.length;\n    booksNumberInfo.textContent = `Showing ${booksNumber} of ${booksTotalNumber}`;\n\n    if (!booksByCategory.length) {\n      booksList.innerHTML = `<p>Sorry, there are no books in this category!</p>`;\n      return;\n    }\n\n    // render\n    const firstBooks = BOOKS.slice(fromElement, numberOfBooks);\n    booksList.innerHTML = createMarkupBooksList(firstBooks);\n\n    if (BOOKS.length > numberOfBooks) {\n      //   console.log(BOOKS.length);\n      displayShowMoreButton();\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\n\n// *********************************** Show More pagination ************************************\nshowMoreButton.addEventListener('click', onShowMoreButton);\n\nlet fromIndex = 0;\nlet toIndex = 0;\n\nfunction onShowMoreButton() {\n  //   console.log(BOOKS);\n  hideShowMoreButton();\n\n  fromIndex = booksNumber;\n\n  booksNumber =\n    BOOKS.length > booksNumber + addPerPage\n      ? booksNumber + addPerPage\n      : BOOKS.length;\n  booksNumberInfo.textContent = `Showing ${booksNumber} of ${booksTotalNumber}`;\n\n  toIndex = booksNumber;\n\n  //   console.log(fromIndex, toIndex);\n\n  // render\n  const nextBooks = BOOKS.slice(fromIndex, toIndex);\n  booksList.insertAdjacentHTML('beforeend', createMarkupBooksList(nextBooks));\n\n  if (BOOKS.length > booksNumber) {\n    displayShowMoreButton();\n  }\n}\n\n// ************************************************* Open Book Modal (Learn More button) ******************************************\nbooksList.addEventListener('click', onLearnMore);\n\nfunction onLearnMore(event) {\n  if (event.target.nodeName !== 'BUTTON') {\n    return;\n  }\n  const selectedBook = event.target.closest('li.books-item');\n  //   console.log(selectedBook);\n  const bookId = selectedBook.dataset.id;\n  //   console.log(bookId);\n\n  // дописати код відкриття модального вікна !!! Book Modal !!!\n}\n\n//\n// не зроблено\n// стилізація DropDown прокрутка\n// Назва книги в один рядок і ... якщо довша\n// hover focus\n","import { initHeroSwiper } from './js/hero.js';\nimport { openNavbar, closeNavbar} from \"./js/handlers\";;\nimport { handleScreenChange } from \"./js/helpers\";\nimport { navbarBtn, navbarCloseBtn, mediaQuery } from \"./js/refs\";\nimport './js/books';\n\nfunction initAfterLoad() {\n  const slider = document.querySelector('.swiper-hero');\n  if (slider) {\n    initHeroSwiper();\n  } else {\n    setTimeout(initAfterLoad, 50);\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', initAfterLoad);\n\n\nhandleScreenChange(mediaQuery)\nmediaQuery.addEventListener(\"change\", handleScreenChange)\n\nnavbarBtn.addEventListener(\"click\", openNavbar);\nnavbarCloseBtn.addEventListener(\"click\", closeNavbar);\n// navbarList.addEventListener(\"click\", handleNavigation); \n\n"],"names":["initHeroSwiper","swiper","Swiper","Navigation","Keyboard","updateButtons","prevBtn","nextBtn","body","navbarBtn","navbarCloseBtn","navbarList","mediaQuery","stopScroll","handleScreenChange","onNavClick","event","handleNavigation","openNavbar","closeNavbar","link","targetId","targetSection","axios","booksCategoriesList","getCategoryList","createMarkupCategoryList","array","markup","list_name","showCategoryList","categories","error","openDropdownBtn","onOpenDropdownBtn","showMoreButton","displayShowMoreButton","hideShowMoreButton","booksList","numberOfBooks","booksNumberInfo","booksNumber","booksTotalNumber","addPerPage","fromElement","BOOKS","getTopBooks","list","getBooksByCategory","category","createMarkupBooksList","author","book_image","price","title","_id","onSelectedCategory","selectedCategory","showTopBooks","showBooksByCaregory","firstBooks","booksByCategory","onShowMoreButton","fromIndex","toIndex","nextBooks","onLearnMore","initAfterLoad"],"mappings":"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"}